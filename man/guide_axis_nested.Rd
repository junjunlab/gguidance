% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/guide_axis_nested.R
\name{guide_axis_nested}
\alias{guide_axis_nested}
\title{Nested axis guide}
\usage{
guide_axis_nested(
  sep = "[^[:alnum:]]+",
  range_start = NULL,
  range_end = NULL,
  range_name = NULL,
  range_depth = NULL,
  bracket = "line",
  bracket_size = unit(2, "mm"),
  bracket_theme = element_line(),
  deep_text = element_text(),
  mirror_padding = TRUE,
  ...
)
}
\arguments{
\item{sep}{A \code{character(1)} that acts as a \link[base:regex]{'regex'}
pattern to split strings into different layers. No string splitting is
performed when the \verb{range_*} arguments are supplied.}

\item{range_start}{A \code{numeric} vector indicating the start of ranges.}

\item{range_end}{A \code{numeric} vector indicating the end of ranges.}

\item{range_name}{A \code{character} vector giving labels to use for ranges.}

\item{range_depth}{(Optional) an \code{integer} vector indicating at what depth
a range should be displayed. This is mostly useful for overruling the
default bracket dodging.}

\item{bracket}{One of the following: \itemize{
\item{A \verb{<matrix[n, 2]>} giving point coordinates for bracket shapes, such
as returned from \link[=bracket_options]{bracket functions}.}
\item{A \code{character(1)} giving one of the
\link[=bracket_options]{bracket functions} as a string. The current options are
\code{"sigmoid"}, \code{"atan"}, \code{"curvy"}, \code{"line"} (default), \code{"round"},
\code{"chevron"} or \code{"square"}.}}}

\item{bracket_size}{A \code{\link[grid:unit]{<unit>}} that sets the size of a
bracket in the direction orthogonal to the axis.}

\item{bracket_theme}{An \code{\link[ggplot2:element]{<element_line>}} object
or \verb{<element_blank>} object controlling the appearance of the brackets. By
default, it inherits from the \verb{axis.ticks.\{x/y\}.\{position\}} theme setting.}

\item{deep_text}{An \code{\link[ggplot2:element]{<element_text>}} object or
\verb{<element_blank>} object. Alternatively, a list of such elements, where
every item applies to a layer of text that are not the regular labels. See
also \code{\link[=elements_text]{elements_text()}} to easily construct a list of text elements.}

\item{mirror_padding}{A \code{logical(1)} which if \code{TRUE} (default), will mirror
the \code{margin} field in the \verb{axis.text.\{x/y\}.\{position\}} theme setting. If
\code{FALSE}, margins are taken as-is. This is an option because the default
margins may sometimes be 0 between text and a bracket, which may look
uncomfortable.}

\item{...}{
  Arguments passed on to \code{\link[=guide_axis_extend]{guide_axis_extend}}
  \describe{
    \item{\code{subtitle}}{A \code{character()} or \code{expression()} giving a subtitle for the
guide. If \code{NULL} (default), no subtitle will be shown. If
\code{length(subtitle) > 1}, text will be distributed over axis and \code{hjust}
setting will be ignored.}
    \item{\code{subtitle.theme}}{An \code{\link[ggplot2:element]{<element_text>}} object
or \verb{<element_blank>} object controlling the appearance of the \code{subtitle}
argument. By default, it inherits from the relevant
\verb{axis.text.\{x/y\}.\{position\}} theme setting.}
    \item{\code{cap_lower,cap_upper}}{A way to set the lower and upper ranges for
axis capping Can be one of the following:
\itemize{
\item \code{NULL} to not perform any axis capping.
\item A \code{function} that takes the break positions as input and returns the
lower or upper boundary. Note that also for discrete scales, the inputs
are the mapped breaks, which are \code{numeric}. A \code{function} input can also
be given as \link[rlang:as_function]{lambda syntax}.
\item A \code{numeric} value, in data units, for the lower and upper boundaries.
\item A \code{\link[grid:unit]{<unit>}} object to set the boundaries independent of
any data.
}}
    \item{\code{colour,color}}{A \code{character(1)} with a valid colour for simultaneously
changing the colour or the axis text, axis ticks and axis line. If \code{NULL}
(default), inherit colours directly from the theme. Otherwise, theme
settings are overruled.}
    \item{\code{minor_size}}{A \code{numeric(1)} giving the relative size of minor axis ticks
relative to major axis ticks, as defined by the
\verb{axis.ticks.length.\{x/y\}.\{position\}} theme element. If \code{NULL} (default),
minor axis ticks are not shown.}
    \item{\code{major_size}}{A \code{numeric(1)} giving the relative size of major ticks
relative to the \verb{axis.ticks.length.\{x/y\}.\{position\}} theme element. If
\code{NULL} (default), major ticks are drawn to the theme's length.}
    \item{\code{title}}{A character string or expression indicating a title of guide.
If \code{NULL}, the title is not shown. By default
(\code{\link[ggplot2:waiver]{waiver()}}), the name of the scale object or the name
specified in \code{\link[ggplot2:labs]{labs()}} is used for the title.}
    \item{\code{check.overlap}}{silently remove overlapping labels,
(recursively) prioritizing the first, last, and middle labels.}
    \item{\code{angle}}{Compared to setting the angle in \code{\link[ggplot2:theme]{theme()}} / \code{\link[ggplot2:element_text]{element_text()}},
this also uses some heuristics to automatically pick the \code{hjust} and \code{vjust} that
you probably want.}
    \item{\code{n.dodge}}{The number of rows (for vertical axes) or columns (for
horizontal axes) that should be used to render the labels. This is
useful for displaying labels that would otherwise overlap.}
    \item{\code{order}}{A positive \code{integer} of length 1 that specifies the order of
this guide among multiple guides. This controls in which order guides are
merged if there are multiple guides for the same position. If 0 (default),
the order is determined by a secret algorithm.}
    \item{\code{position}}{Where this guide should be drawn: one of top, bottom,
left, or right.}
  }}
}
\value{
A \verb{<Guide>} ggproto object that can be given to the
\code{\link[ggplot2:guides]{guides()}} function, or set as the \code{guide} argument
in a position scale.
}
\description{
Like regular \link[ggplot2:guide_axis]{axis guides}, this guide is a visual
representation of position scales. In addition, this axis guide has extra
options to visualise various ranges in the scale.
}
\examples{
# A standard plot
p <- ggplot(mpg, aes(class, displ)) +
  geom_boxplot()

# If no `range_*` argument is given, the guide tries to split the labels
p + aes(x = interaction(cyl, year)) +
  guides(x = "axis_nested")

# For discrete axes, you can select the ranges either by numerical
# equivalent, or by break level.
p + guides(x = guide_axis_nested(
  range_start = c("2seater", "pickup"),
  range_end   = c(4, 7),
  range_name  = c("First range", "Second range")
))

# If ranges overlap, they are automatically dodged. You can override this
# by setting the `range_depth` argument.
p + guides(x = guide_axis_nested(
  range_start = c(1, 3),
  range_end   = c(4, 6),
  range_name  = c("First range", "Second range")
))

# You can change the appearance of the brackets. See ?bracket_options for
# ready-to-go bracket functions.
p + aes(x = interaction(cyl, year)) +
  guides(x = guide_axis_nested(
    bracket       = "curvy",
    bracket_size  = unit(5, "mm"),
    bracket_theme = element_line(colour = "forestgreen"),
    deep_text     = element_text(colour = "tomato")
  ))
}
\seealso{
Other axis variants: 
\code{\link{guide_axis_cap}()},
\code{\link{guide_axis_extend}()},
\code{\link{guide_axis_minor}()},
\code{\link{guide_axis_table}()}
}
\concept{axis variants}
